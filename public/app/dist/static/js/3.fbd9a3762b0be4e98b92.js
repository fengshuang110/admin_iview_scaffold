webpackJsonp([3],{XlYP:function(e,t){},kgDb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("aA9S"),r=n.n(a),i=n("lC5x"),o=n.n(i),s=n("J0Oq"),l=n.n(s),c=n("vLgD"),u={pages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("/permission/index",e)},create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("/permission/create",e,{method:"POST"})},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("/permission/update",e,{method:"POST"})},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("/permission/delete",e,{method:"POST"})},group:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("/permission/group",e)}};n("0xDb");var d={data:function(){return{searchField:{},tableData:[],pagination:{},permissionGroup:[],showModal:!1,loading:!0,itemBackup:{},rowBackup:{},item:{id:0,name:"",permission_menu_id:"",action_url:""}}},computed:{tableCols:function(){return function(){var e=this;return[{title:"id",key:"id"},{title:"权限名称",key:"name"},{title:"路由",key:"action_url"},{title:"权限分组",key:"permission_menu_name"},{title:"状态",key:"status",render:function(e,t){return 1===t.row.status?e("tag",{attrs:{color:"green"}},["可用"]):e("tag",{attrs:{color:"red"}},["不可用"])}},{title:"操作",key:"action",width:200,align:"center",render:function(t,n){var a=n.row;return t("div",[t("i-button",{on:{click:function(){return e.handleShowModal(a)}}},["编辑"]),t("default-confirm",{attrs:{row:a},on:{operateClick:function(t,n){return e.handleDelete(t,n)}}})])}}]}.call(this)}},created:function(){this.itemBackup=this.item,this.renderPage(),this.getPermissionGroup()},methods:{getPermissionGroup:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.group();case 2:e.permissionGroup=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},renderPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return l()(o.a.mark(function n(){var a,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=r()({page:t},e.searchField),n.next=3,u.pages(a);case 3:i=n.sent,e.tableData=i.data,e.pagination=i;case 6:case"end":return n.stop()}},n,e)}))()},handleDelete:function(e,t){var n=this,a=e.row;return l()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("confirm"===t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,r=a.id,e.next=6,u.delete({id:r});case 6:n.renderPage(),n.$Message.success("删除成功"),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}},e,n,[[2,10]])}))()},handleShowModal:function(e){this.showModal=!0;var t=e.id;0!==(void 0===t?1:t)?(this.item=r()({},e),this.rowBackup=e):this.item=this.itemBackup},handlePostSubmit:function(){var e=this;return l()(o.a.mark(function t(){var n,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="create",a=r()({},e.item),e.item.id&&(n="update",a=e.item),t.prev=3,t.next=6,u[n](a);case 6:e.renderPage(),e.$Message.success("操作成功"),e.showModal=!1,t.next=13;break;case 11:t.prev=11,t.t0=t.catch(3);case 13:e.loading=!1,e.$nextTick(function(){return e.loading=!0});case 15:case"end":return t.stop()}},t,e,[[3,11]])}))()}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("default-card",{attrs:{title:"权限管理"}},[n("div",{staticClass:"default-margin-left default-margin-bottom"},[n("Form",{ref:"formInline",attrs:{inline:"","label-width":80}},[n("Button",{attrs:{type:"primary",icon:"plus-round"},on:{click:e.handleShowModal}},[e._v("\n      添加权限\n    ")]),e._v(" "),n("Input",{staticClass:"fix-input",attrs:{type:"text",placeholder:"名称",icon:"ios-search"},on:{"on-enter":function(t){e.renderPage(1)}},model:{value:e.searchField.name,callback:function(t){e.$set(e.searchField,"name",t)},expression:"searchField.name"}}),e._v(" "),n("FormItem",{attrs:{label:"权限组"}},[n("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.searchField.permission_menu_id,callback:function(t){e.$set(e.searchField,"permission_menu_id",t)},expression:"searchField.permission_menu_id"}},e._l(e.permissionGroup,function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.renderPage(1)}}},[e._v("查询")])],1)],1)],1),e._v(" "),n("default-table",{attrs:{tableCols:e.tableCols,tableData:e.tableData}}),e._v(" "),n("default-pagination",{attrs:{pagination:e.pagination},on:{handleChange:e.renderPage}}),e._v(" "),n("Modal",{attrs:{title:e.item.id>0?"编辑":"添加",loading:e.loading},on:{"on-ok":e.handlePostSubmit},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[n("Form",{attrs:{model:e.item,"label-width":80}},[n("FormItem",{attrs:{label:"权限名称"}},[n("Input",{attrs:{placeholder:"权限名称"},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:"路由"}},[n("Input",{attrs:{placeholder:"路由"},model:{value:e.item.action_url,callback:function(t){e.$set(e.item,"action_url",t)},expression:"item.action_url"}})],1),e._v(" "),n("FormItem",{attrs:{label:"权限分组"}},[n("Select",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.item.permission_menu_id,callback:function(t){e.$set(e.item,"permission_menu_id",t)},expression:"item.permission_menu_id"}},e._l(e.permissionGroup,function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)],1)],1)],1)},staticRenderFns:[]};var p=n("C7Lr")(d,m,!1,function(e){n("XlYP")},null,null);t.default=p.exports}});